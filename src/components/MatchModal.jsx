import { useRef, useEffect, useCallback } from "react";
import { NavLink, Link } from 'react-router';
import { useSelector } from 'react-redux';
import Button from 'react-bootstrap/Button';
import Modal from 'react-bootstrap/Modal';

import '../assets/css/welcome-modal.css'
import '../assets/css/responsive.css'

import { useLocation } from "react-router";

import { navigate } from "../navigationService";

function MatchModal(props) {
    const location = useLocation();
    const { isSaving } = useSelector((state) => state.user);

    const keepSwiping = () =>{
      console.log('keepSwiping location', location)
      if (location.pathname === '/home') {
        props.onHide()
      }else{
        navigate(`/home`)
      }
    }

    return (
      <Modal
       {...props}
        size="md-down"
        aria-labelledby="contained-modal-title-vcenter"
        centered
        >
        <Modal.Body className="content-body">
            <span onClick={props.onHide} className="modal-close-button">
              <i className="fa fa-times" style={{color: "#fff"}}></i>
            </span>
            <div class="match-area style-3 bg-image">
              <div class="match-inner">
                <div class="item1">
                  <svg width="61" height="64" viewBox="0 0 61 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M1.97533 22.1525C1.15291 20.289 0.915119 18.2198 1.29335 16.2183C1.67159 14.2168 2.64806 12.3771 4.09379 10.9422C5.53953 9.50726 7.38652 8.54466 9.39082 8.18148C11.3951 7.81831 13.4624 8.07165 15.3197 8.90806C15.4489 8.96314 15.5879 8.99111 15.7283 8.99024C15.8687 8.98937 16.0074 8.95967 16.1358 8.90299C16.2643 8.84631 16.3797 8.76385 16.4749 8.66072C16.5702 8.5576 16.6432 8.43601 16.6896 8.30349C17.3155 6.36038 18.5183 4.65397 20.138 3.41139C21.7577 2.1688 23.7174 1.44897 25.7563 1.34771C27.7952 1.24644 29.8166 1.76854 31.5515 2.84452C33.2863 3.9205 34.6523 5.49932 35.4677 7.37085C37.1602 11.2057 35.9121 15.1779 34.5088 18.7985L29.2385 31.7548C29.0847 32.2509 28.827 32.7086 28.4826 33.0974C28.1383 33.4863 27.7151 33.7974 27.2413 34.0101C26.7674 34.2228 26.2537 34.3323 25.7343 34.3312C25.2149 34.3301 24.7017 34.2185 24.2287 34.0038L11.0641 29.1456C7.44358 27.7423 3.67522 26.0041 1.97533 22.1525Z" fill="#FFB5D8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                  <path d="M44.6613 57.3605C44.3041 56.5512 44.2008 55.6525 44.3651 54.7833C44.5293 53.914 44.9534 53.115 45.5813 52.4918C46.2092 51.8686 47.0114 51.4505 47.8819 51.2928C48.7524 51.1351 49.6502 51.2451 50.4569 51.6084C50.5129 51.6323 50.5733 51.6444 50.6343 51.6441C50.6953 51.6437 50.7555 51.6308 50.8113 51.6062C50.8671 51.5815 50.9172 51.5457 50.9586 51.5009C50.9999 51.4562 51.0317 51.4033 51.0518 51.3458C51.3236 50.5019 51.846 49.7608 52.5495 49.2211C53.2529 48.6814 54.1041 48.3688 54.9896 48.3248C55.8751 48.2808 56.753 48.5076 57.5065 48.9749C58.2599 49.4422 58.8532 50.1279 59.2073 50.9407C59.9424 52.6063 59.4003 54.3314 58.7909 55.9039L56.5019 61.5309C56.4351 61.7464 56.3232 61.9452 56.1736 62.114C56.0241 62.2829 55.8403 62.418 55.6345 62.5104C55.4287 62.6028 55.2056 62.6504 54.98 62.6499C54.7544 62.6494 54.5315 62.601 54.3261 62.5077L48.6086 60.3977C47.0362 59.7883 45.3995 59.0333 44.6613 57.3605Z" fill="#FFD4E8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </div>
                <div class="item2">
                  <svg width="52" height="77" viewBox="0 0 52 77" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M2.38158 63.7804C1.55916 61.9169 1.32137 59.8477 1.6996 57.8462C2.07784 55.8447 3.05431 54.005 4.50004 52.5701C5.94578 51.1352 7.79277 50.1726 9.79707 49.8094C11.8014 49.4462 13.8687 49.6996 15.726 50.536C15.8551 50.5911 15.9942 50.619 16.1346 50.6182C16.2749 50.6173 16.4136 50.5876 16.5421 50.5309C16.6705 50.4742 16.7859 50.3918 16.8812 50.2887C16.9764 50.1855 17.0495 50.0639 17.0958 49.9314C17.7217 47.9883 18.9246 46.2819 20.5442 45.0393C22.1639 43.7967 24.1237 43.0769 26.1626 42.9756C28.2015 42.8744 30.2229 43.3965 31.9577 44.4725C33.6926 45.5484 35.0586 47.1272 35.8739 48.9988C37.5664 52.8337 36.3183 56.8059 34.915 60.4264L29.6448 73.3827C29.4909 73.8788 29.2332 74.3365 28.8889 74.7253C28.5445 75.1142 28.1214 75.4253 27.6475 75.638C27.1737 75.8508 26.66 75.9602 26.1406 75.9591C25.6212 75.9581 25.1079 75.8465 24.635 75.6318L11.4704 70.7736C7.84984 69.3703 4.08147 67.632 2.38158 63.7804Z" fill="#FFB5D8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                  <path d="M32.4588 12.1994C32.0321 11.2327 31.9087 10.1592 32.105 9.12089C32.3012 8.08254 32.8078 7.12814 33.5578 6.38374C34.3078 5.63934 35.266 5.13996 36.3058 4.95155C37.3456 4.76314 38.418 4.89457 39.3816 5.32848C39.4486 5.35706 39.5207 5.37157 39.5935 5.37112C39.6664 5.37067 39.7383 5.35526 39.8049 5.32586C39.8716 5.29645 39.9314 5.25367 39.9809 5.20017C40.0303 5.14667 40.0682 5.08359 40.0922 5.01485C40.4169 4.0068 41.0409 3.12155 41.8812 2.47692C42.7215 1.83229 43.7381 1.45886 44.7959 1.40633C45.8536 1.35379 46.9023 1.62465 47.8023 2.18284C48.7023 2.74104 49.4109 3.5601 49.8339 4.53101C50.712 6.52047 50.0645 8.58118 49.3365 10.4594L46.6024 17.1809C46.5225 17.4383 46.3889 17.6757 46.2102 17.8774C46.0316 18.0792 45.812 18.2406 45.5662 18.3509C45.3204 18.4613 45.0539 18.5181 44.7844 18.5175C44.515 18.5169 44.2487 18.4591 44.0034 18.3477L37.1738 15.8273C35.2956 15.0993 33.3406 14.1976 32.4588 12.1994Z" fill="#FFD4E8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </div>
                <div class="item3">
                  <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path opacity="0.3" d="M184.396 89.6963C184.54 91.2929 184.636 92.9031 184.685 94.5254L184.187 94.54C184.21 95.3405 184.223 96.1439 184.223 96.9502C184.223 97.7565 184.21 98.5599 184.187 99.3604L184.685 99.374C184.636 100.996 184.54 102.606 184.396 104.203L183.899 104.159C183.755 105.764 183.562 107.355 183.323 108.931L183.817 109.005C183.574 110.608 183.282 112.196 182.945 113.767L182.459 113.662C182.121 115.236 181.736 116.794 181.307 118.332L181.786 118.466C181.351 120.025 180.87 121.565 180.344 123.084L179.873 122.922C179.347 124.441 178.776 125.939 178.162 127.414L178.621 127.605C178 129.098 177.335 130.568 176.627 132.014L176.18 131.795C175.473 133.238 174.724 134.656 173.935 136.048L174.367 136.294C173.57 137.699 172.732 139.077 171.854 140.428L171.436 140.156C170.561 141.501 169.647 142.819 168.694 144.106L169.094 144.403C168.134 145.701 167.136 146.968 166.101 148.204L165.719 147.885C164.689 149.114 163.623 150.313 162.521 151.478L162.883 151.819C161.775 152.992 160.632 154.131 159.455 155.234L159.115 154.871C157.947 155.968 156.744 157.029 155.511 158.055L155.829 158.438C154.589 159.468 153.317 160.462 152.016 161.418L151.722 161.017C150.431 161.964 149.11 162.874 147.762 163.744L148.031 164.163C146.678 165.037 145.297 165.871 143.889 166.664L143.645 166.229C142.25 167.015 140.829 167.76 139.384 168.462L139.602 168.909C138.154 169.613 136.682 170.274 135.188 170.892L134.998 170.432C133.521 171.042 132.021 171.608 130.501 172.131L130.662 172.603C129.142 173.125 127.601 173.603 126.041 174.035L125.908 173.556C124.369 173.982 122.811 174.364 121.236 174.699L121.339 175.187C119.768 175.521 118.18 175.81 116.576 176.051L116.503 175.558C114.927 175.795 113.336 175.985 111.731 176.129L111.775 176.627C110.178 176.77 108.568 176.864 106.945 176.912L106.932 176.414C106.131 176.438 105.328 176.45 104.521 176.45C103.715 176.45 102.912 176.438 102.111 176.414L102.097 176.912C100.474 176.864 98.8636 176.77 97.2666 176.627H97.2676L97.3115 176.129C95.7068 175.985 94.1159 175.795 92.54 175.558L92.4658 176.051C90.8618 175.81 89.2735 175.521 87.7021 175.187L87.8066 174.699C86.2316 174.364 84.6738 173.982 83.1348 173.556L83.001 174.035C81.441 173.603 79.9001 173.125 78.3799 172.603L78.542 172.131C77.0218 171.608 75.522 171.042 74.0449 170.432L73.8545 170.892C72.3598 170.274 70.888 169.613 69.4404 168.909L69.6592 168.462C68.2141 167.76 66.793 167.015 65.3984 166.229L65.1533 166.664C63.7454 165.871 62.3642 165.037 61.0107 164.163L61.2812 163.744C59.9328 162.874 58.612 161.964 57.3213 161.017L57.0264 161.418C55.7247 160.462 54.4529 159.468 53.2129 158.438L53.5322 158.055C52.2988 157.029 51.0965 155.968 49.9277 154.871L49.5869 155.234C48.4103 154.131 47.2673 152.992 46.1592 151.819L46.5215 151.478C45.4204 150.313 44.3539 149.114 43.3242 147.885L42.9414 148.204C41.9065 146.968 40.9081 145.701 39.9482 144.403L40.3486 144.106C39.3962 142.819 38.4822 141.501 37.6074 140.156L37.1885 140.428C36.3103 139.077 35.4719 137.699 34.6748 136.294L35.1084 136.048C34.3186 134.656 33.5697 133.238 32.8633 131.795L32.415 132.014C31.7073 130.568 31.0423 129.098 30.4209 127.605L30.8809 127.414C30.2667 125.939 29.696 124.441 29.1699 122.922L28.6982 123.084C28.1721 121.565 27.6903 120.025 27.2549 118.466L27.7363 118.332C27.3067 116.794 26.9216 115.236 26.584 113.662L26.0967 113.767C25.7598 112.196 25.4676 110.608 25.2246 109.005L25.7197 108.931C25.481 107.355 25.2881 105.764 25.1436 104.159L24.6455 104.203C24.5017 102.606 24.4058 100.996 24.3574 99.374L24.8564 99.3604C24.8326 98.5599 24.8203 97.7565 24.8203 96.9502C24.8203 96.1439 24.8326 95.3405 24.8564 94.54L24.3574 94.5254C24.4058 92.9031 24.5016 91.2929 24.6455 89.6963L25.1436 89.7412C25.2881 88.1365 25.481 86.5455 25.7197 84.9697L25.2246 84.8945C25.4676 83.2911 25.7598 81.7036 26.0967 80.1328L26.584 80.2383C26.9216 78.6639 27.3067 77.1066 27.7363 75.5684L27.2549 75.4336C27.6903 73.8745 28.1721 72.3346 28.6982 70.8154L29.1699 70.9785C29.696 69.4598 30.2667 67.9618 30.8809 66.4863L30.4209 66.2939C31.0423 64.8012 31.7073 63.3312 32.415 61.8857L32.8633 62.1055C33.5697 60.6628 34.3186 59.2446 35.1084 57.8525L34.6748 57.6055C35.4719 56.2005 36.3103 54.8221 37.1885 53.4717L37.6074 53.7441C38.4822 52.399 39.3962 51.0814 40.3486 49.7939L39.9482 49.4961C40.9081 48.1986 41.9064 46.9312 42.9414 45.6953L43.3242 46.0156C44.3539 44.7861 45.4204 43.5878 46.5215 42.4229L46.1592 42.0801C47.2673 40.9078 48.4103 39.7689 49.5869 38.665L49.9277 39.0293C51.0965 37.9328 52.2988 36.8709 53.5322 35.8457L53.2129 35.4619C54.4529 34.4312 55.7247 33.4372 57.0264 32.4814L57.3213 32.8838C58.612 31.9361 59.9328 31.0266 61.2812 30.1562L61.0107 29.7363C62.3642 28.8628 63.7454 28.0281 65.1533 27.2354L65.3984 27.6709C66.793 26.8856 68.2141 26.1407 69.6592 25.4385L69.4404 24.9902C70.888 24.2868 72.3598 23.6253 73.8545 23.0078L74.0449 23.4688C75.522 22.8585 77.0217 22.2921 78.542 21.7695L78.3799 21.2969C79.9 20.7743 81.441 20.2967 83.001 19.8643L83.1348 20.3447C84.6738 19.9181 86.2316 19.5364 87.8066 19.2012L87.7021 18.7129C89.2735 18.3784 90.8619 18.0898 92.4658 17.8486L92.54 18.3428C94.1159 18.1058 95.7068 17.915 97.3115 17.7715L97.2676 17.2734L97.2666 17.2725C98.8636 17.1296 100.474 17.0354 102.097 16.9873L102.111 17.4863C102.912 17.4626 103.715 17.4502 104.521 17.4502C105.328 17.4502 106.131 17.4626 106.932 17.4863L106.945 16.9873C108.568 17.0353 110.178 17.1297 111.775 17.2725V17.2734L111.73 17.7715C113.335 17.915 114.927 18.1058 116.503 18.3428L116.576 17.8486C118.18 18.0898 119.768 18.3785 121.339 18.7129L121.236 19.2012C122.811 19.5364 124.369 19.9182 125.908 20.3447L126.041 19.8643C127.601 20.2966 129.142 20.7743 130.662 21.2969L130.501 21.7695C132.021 22.2921 133.521 22.8586 134.998 23.4688L135.188 23.0078C136.682 23.6253 138.154 24.2868 139.602 24.9902L139.384 25.4385C140.829 26.1407 142.25 26.8856 143.645 27.6709L143.889 27.2354C145.297 28.0281 146.678 28.8628 148.031 29.7363L147.762 30.1562C149.11 31.0266 150.431 31.9361 151.722 32.8838L152.016 32.4814C153.317 33.4372 154.589 34.4312 155.829 35.4619L155.511 35.8457C156.744 36.8709 157.947 37.9328 159.115 39.0293L159.455 38.665C160.632 39.7689 161.775 40.9078 162.883 42.0801L162.521 42.4229C163.623 43.5878 164.689 44.7861 165.719 46.0156L166.101 45.6953C167.136 46.9312 168.134 48.1986 169.094 49.4961L168.694 49.7939C169.647 51.0814 170.561 52.399 171.436 53.7441L171.854 53.4717C172.732 54.8221 173.57 56.2005 174.367 57.6055L173.935 57.8525C174.724 59.2446 175.473 60.6628 176.18 62.1055L176.627 61.8857C177.335 63.3312 178 64.8012 178.621 66.2939L178.162 66.4863C178.776 67.9618 179.347 69.4598 179.873 70.9785L180.344 70.8154C180.87 72.3346 181.351 73.8745 181.786 75.4336L181.307 75.5684C181.736 77.1066 182.121 78.6639 182.459 80.2383L182.945 80.1328C183.282 81.7036 183.574 83.2911 183.817 84.8945L183.323 84.9697C183.562 86.5455 183.755 88.1365 183.899 89.7412L184.396 89.6963Z" stroke="#F73050" stroke-opacity="0.5" stroke-dasharray="5 5"></path>
                  <circle opacity="0.5" cx="100" cy="100" r="99.5" stroke="#F73050" strokeOpacity="0.5" strokeDasharray="5 5"></circle>
                  </svg>
                </div>
                <div class="dz-media">
                  <div class="left-media">
                    <img src={props.reaction?.sender?.imageFirst} alt={props.reaction?.sender?.firstname} class="wow flipInY" data-wow-duration="1.5s" style={{visibility: "visible", animationDuration: "1.5s"}}/>
                    <div class="heart">
                      <svg width="27" height="26" viewBox="0 0 27 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M2.83594 10.2649C2.83596 9.06308 3.20053 7.88957 3.88149 6.89933C4.56245 5.90909 5.52776 5.1487 6.64994 4.7186C7.77212 4.2885 8.99838 4.20891 10.1667 4.49034C11.3351 4.77178 12.3906 5.40101 13.1939 6.29491C13.2504 6.35541 13.3188 6.40363 13.3948 6.43661C13.4708 6.46958 13.5527 6.48659 13.6356 6.48659C13.7184 6.48659 13.8003 6.46958 13.8763 6.43661C13.9523 6.40363 14.0207 6.35541 14.0773 6.29491C14.878 5.3952 15.9338 4.76068 17.104 4.47583C18.2743 4.19097 19.5035 4.26928 20.6282 4.70033C21.7528 5.13138 22.7195 5.89474 23.3996 6.88879C24.0797 7.88284 24.4409 9.06044 24.4352 10.2649C24.4352 12.738 22.8153 14.5847 21.1953 16.2047L15.2642 21.9425C15.0629 22.1736 14.8148 22.3593 14.5363 22.4871C14.2578 22.615 13.9553 22.6821 13.6488 22.684C13.3424 22.686 13.039 22.6227 12.7589 22.4984C12.4788 22.3741 12.2284 22.1916 12.0243 21.963L6.07583 16.2047C4.45588 14.5847 2.83594 12.7488 2.83594 10.2649Z" fill="white" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>
                    </div>
                  </div>
                  <div class="right-media">
                    <img src={props.reaction?.receiver?.imageFirst} alt={props.reaction?.receiver?.firstname} class="wow flipInY" data-wow-duration="1.5s" style={{visibility: "visible", animationDuration: "1.5s"}}/>
                    <div class="heart">
                      <svg width="27" height="26" viewBox="0 0 27 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M2.83594 10.2649C2.83596 9.06308 3.20053 7.88957 3.88149 6.89933C4.56245 5.90909 5.52776 5.1487 6.64994 4.7186C7.77212 4.2885 8.99838 4.20891 10.1667 4.49034C11.3351 4.77178 12.3906 5.40101 13.1939 6.29491C13.2504 6.35541 13.3188 6.40363 13.3948 6.43661C13.4708 6.46958 13.5527 6.48659 13.6356 6.48659C13.7184 6.48659 13.8003 6.46958 13.8763 6.43661C13.9523 6.40363 14.0207 6.35541 14.0773 6.29491C14.878 5.3952 15.9338 4.76068 17.104 4.47583C18.2743 4.19097 19.5035 4.26928 20.6282 4.70033C21.7528 5.13138 22.7195 5.89474 23.3996 6.88879C24.0797 7.88284 24.4409 9.06044 24.4352 10.2649C24.4352 12.738 22.8153 14.5847 21.1953 16.2047L15.2642 21.9425C15.0629 22.1736 14.8148 22.3593 14.5363 22.4871C14.2578 22.615 13.9553 22.6821 13.6488 22.684C13.3424 22.686 13.039 22.6227 12.7589 22.4984C12.4788 22.3741 12.2284 22.1916 12.0243 21.963L6.07583 16.2047C4.45588 14.5847 2.83594 12.7488 2.83594 10.2649Z" fill="white" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>
                    </div>
                  </div>
                </div>
                <div class="match-info wow bounceInRight" data-wow-duration="1s" style={{visibility: "visible", animationDuration: "1s"}}>
                  <span class="sub-title">congratulations </span>
                  <h2 class="title">it’s a <span>match!</span></h2>
                  <p class="text">"Say hello to Marianne and start your conversation now!"</p>
                </div>
                
              
              </div>
            

              <div class="bottom-btn_ container">
                <a onClick={() => navigate(`/home`)} class="btn btn-lg btn-gradient w-100 dz-flex-box rounded-xl m-b10">Say Hello</a>
                <a onClick={() => keepSwiping()} class="btn btn-lg btn-light w-100 dz-flex-box rounded-xl border-0">Keep Swiping</a>
                {/* <a onClick={props.onHide} class="btn btn-lg btn-light w-100 dz-flex-box rounded-xl border-0">Keep Swiping</a> */}
              </div>
              
            </div>
        </Modal.Body>
      </Modal>
    );
}

export default MatchModal;